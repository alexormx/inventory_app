/* Utilidades para cards de productos */
.product-card {
  display: flex;
  flex-direction: column;
}
.product-card .card-body {
  display: flex;
  flex-direction: column;
  height: 100%;
}
.line-clamp-1 {
  display: -webkit-box;
  line-clamp: 1;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.line-clamp-2 {
  display: -webkit-box;
  line-clamp: 2;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.line-clamp-3 {
  display: -webkit-box;
  line-clamp: 3;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.product-desc {
  min-height: 3.6em; /* aprox 3 líneas */
}
@import "bootstrap";

/* Dropdown menu */

.dropdown-menu.active {
  display: block;
}

.badge {
  font-size: 0.75rem;
  padding: 0.4em 0.6em;
}

dialog::backdrop {
  background: rgba(0, 0, 0, 0.5);
}

dialog.modal-dialog-centered {
  border: none;
  padding: 0;
  border-radius: 0.5rem;
  max-width: 600px;
  width: 100%;
}

.modal-close-container {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  z-index: 10;
}

.custom-close {
  position: absolute;
  top: 0.5rem;
  right: 0.5rem;
  width: 2.5rem;
  height: 2.5rem;
  font-size: 1.5rem;
  font-weight: bold;
  color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  background: transparent;
  border-radius: 0.5rem;
  cursor: pointer;
}

.custom-close:hover,
.custom-close:focus {
  background-color: rgba(0, 0, 0, 0.05);
  outline: none;
}
.box-requirements {
  max-width: 330px; /* Adjust width */
  font-size: 12px; /* Smaller text */
  color: gray; /* Lighter text */
  padding: 10px 20px; /* Reduce padding */
  left: 0; /* Adjust as needed */
  right: 20px;
  top: 0; /* Adjust as needed */
  bottom: 20px; /* Adjust as needed */
  border-radius: 5px;
  box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1); /* Add shadow */
  margin-top: 10px; /* Reduce top margin */
  margin-bottom: 10px; /* Reduce bottom margin */

  ul {
    padding: 0;
    margin: 0;
    li {
      list-style: none;
      margin: 1px 0;
    }
  }
}

.link-registration {
  text-align: center;
  margin-top: 10px;
}

.form-signin {
  max-width: 330px;
  padding: 1rem;

  .form-floating:focus-within {
    z-index: 2;
  }

  .top-input {
    margin-bottom: -1px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
  }

  .middle-input {
    margin-bottom: -1px;
    margin-top: -1px;
    border-bottom-right-radius: 0;
    border-bottom-left-radius: 0;
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }

  .bottom-input {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
  }

  .btn {
    margin: 10px 0;
  }
}

/* Sidebar */
/* Paleta del sidebar (rojo borgoña) */
:root {
  --sidebar-bg: #7A1F1F;         /* base */
  --sidebar-hover-bg: #992525;   /* hover */
  --sidebar-active-bg: #B42828;  /* activo */
  --sidebar-border: #D14B4B;     /* acento/borde activo */
  --sidebar-text: #FFFFFF;       /* texto principal */
  --sidebar-muted: #E9CFCF;      /* labels/ayudas */
  --sidebar-icon: #FFD2D2;       /* iconos/acento suave */
  --sidebar-divider: rgba(255,255,255,0.12); /* divisores */
}

aside#sidebar {
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  align-self: flex-start;
  width: 240px; /* ancho base cuando está expandido */
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
}

/* Contenedor interno: dar aire y separar del borde */
aside#sidebar .sidebar-inner {
  padding: 16px 14px;
}

/* Links del sidebar: hover y activo */
aside#sidebar .nav-link {
  color: var(--sidebar-text);
  border-radius: 0.35rem;
  padding: 0.55rem 0.75rem;
  margin: 4px 6px; /* mayor separación vertical */
  transition: background-color 0.15s ease, color 0.15s ease;
}
aside#sidebar .nav-link:hover {
  /* Hover neutral (gris claro sobre rojo) para menos saturación */
  background-color: rgba(255, 255, 255, 0.12);
  color: var(--sidebar-text);
}
aside#sidebar .nav-link.active,
aside#sidebar .nav-link[aria-current="page"] {
  background-color: var(--sidebar-active-bg);
  color: var(--sidebar-text);
  font-weight: 600;
  border-left: 4px solid var(--sidebar-border);
  padding-left: calc(0.75rem - 4px);
}

aside#sidebar hr { border-color: var(--sidebar-divider); }

/* Encabezados de sección (USERS, INVENTORY, SYSTEM) con mayor contraste */
aside#sidebar .text-secondary.sidebar-label,
aside#sidebar .text-secondary {
  color: var(--sidebar-muted) !important; /* más claro sobre fondo rojo */
  opacity: 0.95;
  letter-spacing: 0.06em;
}

/* Botón hamburguesa: centrado, tamaño consistente y hover neutral */
aside#sidebar .sidebar-toggle-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  padding: 0;
  border: 1px solid var(--sidebar-divider);
  background: transparent;
  color: var(--sidebar-text);
  border-radius: 8px;
  transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
}
aside#sidebar .sidebar-toggle-btn:hover,
aside#sidebar .sidebar-toggle-btn:focus {
  background: rgba(255, 255, 255, 0.12);
  color: var(--sidebar-text);
  border-color: var(--sidebar-border);
  outline: none;
}

/* Colapsado: mantener algo de padding para que no se pegue a la orilla */
.sidebar-collapsed aside#sidebar .sidebar-inner {
  padding: 12px 10px;
}
.sidebar-collapsed aside#sidebar {
  width: 60px !important;
}

.sidebar-collapsed aside#sidebar .nav-link {
  justify-content: center;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
}

.sidebar-collapsed aside#sidebar .nav-link i {
  margin-right: 0 !important;
}

/* Ocultar labels del sidebar inmediatamente cuando está colapsado (sin depender de JS) */
.sidebar-collapsed .sidebar-label {
  display: none !important;
}

img.product-order-image {
  width: 40px;
  height: 40px;
  object-fit: cover;
}

/* Inventory */
.main-inventory-card .card-header img {
  width: 40px;
  height: 40px;
  object-fit: cover;
}

.inventory-card .card-header {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.inventory-filter.active {
  color: #fff;
}

/* Compact inventory visuals */
.inventory-card {
  margin-bottom: 0.5rem;
}

.inventory-card .card-body {
  padding-top: 0.4rem;
  padding-bottom: 0.4rem;
}

.inventory-card .card-header img {
  width: 32px;
  height: 32px;
}

.inventory-card .badge {
  font-size: 0.72rem;
  padding: 0.25em 0.45em;
}

.inventory-search-input {
  max-width: 260px;
}


/* Footer */
@media (max-width: 800px) {
  footer {
    small {
      display: block;
      float: none;
      margin-bottom: 1em;
    }
    ul {
      float: none;
      padding: 0;
      li {
        float: none;
        margin-left: 0;
      }
    }
  }
}

// Toggle Switch Style
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 46px;
  height: 26px;

  input {
    opacity: 0;
    width: 0;
    height: 0;

    &:checked + .slider {
      background-color: $primary;

      &::before {
        transform: translateX(20px);
      }
    }

    &:focus + .slider {
      box-shadow: 0 0 1px $primary;
    }
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: background-color 0.3s ease;
    border-radius: 34px;

    &::before {
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      left: 3px;
      bottom: 3px;
      background-color: #fff;
      transition: transform 0.3s ease;
      border-radius: 50%;
    }
  }
}

// Dashboard tweaks
.card .card-header {
  font-weight: 600;
}

.table-sm th, .table-sm td {
  vertical-align: middle;
}

.card.text-bg-light .fs-4,
.card.text-bg-success-subtle .fs-5,
.card.text-bg-warning-subtle .fs-5,
.card.text-bg-primary-subtle .fs-5,
.card.text-bg-info-subtle .fs-4 {
  letter-spacing: 0.2px;
}

.card.text-bg-light .small.text-muted { text-transform: uppercase; }
.product-image {
  height: 200px;
  width: 100%;
  object-fit: contain;
  background-color: #f8f9fa;
  padding: 8px;
}

.navbar .btn {
  padding: 0.4rem 0.8rem;
  font-size: 0.9rem;
  line-height: 1.2;
}

/* Admin navbar styling to complement sidebar */
.admin-navbar {
  background: #6a1b1b; /* un tono más oscuro que el sidebar */
  border-bottom: 1px solid var(--sidebar-divider);
  position: sticky;
  top: 0;
  z-index: 1020; /* por encima del contenido */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.12);
}
.admin-navbar .navbar-brand,
.admin-navbar .nav-link {
  color: #fff;
}
.admin-navbar .nav-link {
  border: 1px solid var(--sidebar-divider);
  margin-left: 6px;
}
.admin-navbar .nav-link:hover,
.admin-navbar .nav-link:focus {
  background: rgba(255, 255, 255, 0.12);
  border-radius: 0.35rem;
  border-color: var(--sidebar-border);
}
.admin-navbar .navbar-toggler {
  border-color: var(--sidebar-divider);
}
.admin-navbar .navbar-toggler:hover,
.admin-navbar .navbar-toggler:focus {
  background: rgba(255, 255, 255, 0.12);
}

/* En móviles, evitar sticky para no consumir altura útil */
@media (max-width: 767.98px) {
  .admin-navbar {
    position: static;
    box-shadow: none;
  }
}

/* User chip */
.admin-navbar .user-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  border: 1px solid var(--sidebar-divider);
  border-radius: 999px;
  padding: 4px 10px;
}
.admin-navbar .user-chip .user-initials {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.8rem;
}

.input-group-sm .form-control {
  width: 45px !important;
  padding: 0.2rem 0.4rem;
}

/* Hide arrows in number inputs */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type="number"] {
  width: 60px;
  text-align: center;
  appearance: textfield; /* estándar */
  -moz-appearance: textfield; /* Firefox */
}

.legal-page {
  max-width: 850px;

  .privacy-notice {
    h1, h3 {
      color: #333;
    }

    p, li {
      font-size: 1.05rem;
      line-height: 1.7;
      color: #444;
    }

    ul {
      padding-left: 1.2rem;
    }

    a {
      color: #007bff;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }
}

.cookie-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100vh;
  background-color: rgba(0,0,0,0.3);
  z-index: 9998;
  display: none;
}

.cookie-banner {
  z-index: 9999;
  font-size: 0.9rem;
}

.product-show {
  h4 {
    border-bottom: 2px solid #e0e0e0;
    padding-bottom: 0.4rem;
    margin-bottom: 1rem;
    font-weight: 600;
  }

  .table th {
    background-color: #f8f9fa;
    font-weight: 500;
  }
}

#product-gallery {
  .main-image-wrapper {
    position: relative;
    max-width: 600px;
    margin: auto;

    .main-image {
      width: 100%;
      height: auto;
      max-height: 500px;
      object-fit: contain;
      display: block;
      border-radius: 8px;
      cursor: pointer;
    }

    .gallery-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.5);
      color: white;
      font-size: 2rem;
      width: 40px;
      height: 60px;
      border: none;
      z-index: 10;
      cursor: pointer;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;

      &.left {
        left: 0;
      }

      &.right {
        right: 0;
      }
    }
  }

  .thumbnail-row {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 15px;
    flex-wrap: wrap;

    .thumbnail-image {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border: 2px solid transparent;
      border-radius: 5px;
      cursor: pointer;
      transition: border 0.3s ease;

      &.selected-thumbnail {
        border-color: #007bff; // Bootstrap primary blue
      }
    }
  }
}


.whatsapp-float-button {
  position: fixed;
  /* Sass no interpreta env() + n como número para max(); usamos calc() dentro y fallback */
  bottom: 18px;
  right: 18px;
  /* Override mediante custom properties compatibles en runtime */
  bottom: calc(max(18px, env(safe-area-inset-bottom, 0px) + 12px));
  right: calc(max(18px, env(safe-area-inset-right, 0px) + 12px));
  background: linear-gradient(145deg, #25d366, #20b558);
  color: #fff;
  border-radius: 50%;
  width: 64px;
  height: 64px;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow: 0 6px 16px -2px rgba(0,0,0,0.35), 0 2px 4px rgba(0,0,0,0.25);
  text-decoration: none;
  z-index: 9999;
  transition: transform .25s cubic-bezier(.4,0,.2,1), box-shadow .25s, background .4s;
  isolation: isolate;
  overflow: hidden;
  outline: none;

  i { font-size: 34px; line-height: 1; filter: drop-shadow(0 1px 1px rgba(0,0,0,0.25)); }
  .visually-hidden { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); border:0; }

  &:before { /* leve halo */
    content:""; position:absolute; inset:0; border-radius:50%;
    background:radial-gradient(circle at 35% 35%, rgba(255,255,255,0.35), rgba(255,255,255,0) 70%);
    opacity:.6; pointer-events:none; mix-blend-mode:overlay;
  }

  &:hover { transform: translateY(-3px) scale(1.05); box-shadow:0 10px 22px -4px rgba(0,0,0,0.4), 0 4px 8px rgba(0,0,0,0.25); }
  &:active { transform: translateY(-1px) scale(.97); box-shadow:0 4px 12px -2px rgba(0,0,0,0.4); }
  &:focus-visible { box-shadow:0 0 0 4px rgba(255,255,255,0.9), 0 0 0 6px #25d366, 0 6px 16px -2px rgba(0,0,0,0.35); }

  /* Animación pulse suave opcional */
  animation: wa-pulse 4.5s ease-in-out infinite;
}

@keyframes wa-pulse {
  0%, 70%, 100% { box-shadow:0 6px 16px -2px rgba(0,0,0,0.35), 0 2px 4px rgba(0,0,0,0.25); }
  40% { box-shadow:0 0 0 0 rgba(37,211,102,0.55), 0 6px 16px -2px rgba(0,0,0,0.35); }
  50% { box-shadow:0 0 0 14px rgba(37,211,102,0); }
}

@media (max-width: 575.98px) {
  .whatsapp-float-button { width:56px; height:56px; i { font-size:30px; } }
}

/* Flash stack (toast-style) */
#flash-stack.flash-stack {
  pointer-events: none; /* permitir clics pasar salvo dentro del alert */
}
#flash-stack .flash-message {
  pointer-events: auto;
  box-shadow: 0 6px 18px rgba(0,0,0,0.18);
  background: rgba(255,255,255,0.95);
  border: 1px solid rgba(0,0,0,0.07);
}
#flash-stack .flash-message .btn-close {
  --bs-btn-close-width: .65rem;
  --bs-btn-close-height: .65rem;
  font-size: .65rem;
  width: .85rem;
  height: .85rem;
  opacity: .6;
}
#flash-stack .flash-message .btn-close:hover { opacity: .9; }

/* Evitar solapamiento con botón de WhatsApp: si coincide, desplazar stack */
@media (max-width: 575.98px) {
  #flash-stack.flash-stack { right: .75rem; left: .75rem; width:auto; }
  #flash-stack .flash-message { margin-left:auto; }
}

/* Ajuste dinámico cuando ambos están visibles (simple margen extra) */
body:has(.whatsapp-float-button)#flash-stack,
body:has(.whatsapp-float-button) #flash-stack { margin-bottom: 76px; }

/* ============================
   Navbar (extracted from inline)
   ============================ */
.theme-transition * { transition: background-color .4s ease, color .4s ease, border-color .4s ease; }

:root {
  --color-bg: #f8f9fa;
  --color-bg-elevated: #ffffff;
  --color-surface: #ffffff;
  --color-border: #d5d7da;
  --color-text: #2c2c2c;
  --color-text-muted: #6c6f75;
  --color-accent: #dc3545;
  --color-accent-hover: #c82333;
  --color-accent-soft: rgba(220,53,69,0.08);
  --color-accent-soft-hover: rgba(220,53,69,0.15);
  --color-backdrop: rgba(0,0,0,0.45);
  --color-navbar-shadow: 0 2px 6px rgba(0,0,0,0.04);
  --color-navbar-shadow-strong: 0 2px 6px rgba(0,0,0,0.12);
}

[data-theme="dark"] {
  --color-bg: #181b1e;
  --color-bg-elevated: #1f2428;
  --color-surface: #242a2f;
  --color-border: #383f45;
  --color-text: #f3f4f5;
  --color-text-muted: #a0a5aa;
  --color-accent: #e25563;
  --color-accent-hover: #c6404d;
  --color-accent-soft: rgba(226,85,99,0.16);
  --color-accent-soft-hover: rgba(226,85,99,0.24);
  --color-backdrop: rgba(0,0,0,0.6);
  --color-navbar-shadow: 0 2px 6px rgba(0,0,0,0.5);
  --color-navbar-shadow-strong: 0 2px 10px rgba(0,0,0,0.6);
}

body { background: var(--color-bg); color: var(--color-text); }
body [role="dialog"], .card, .modal, .dropdown-menu { background: var(--color-surface); }

.visually-hidden { position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0 0 0 0) !important; white-space:nowrap !important; border:0 !important; }
.site-navbar {
  --nav-height-base: 76px;
  --nav-height-shrink: 52px;
  position: fixed; top: var(--banner-height,0); left:0; right:0; z-index:1100; background:var(--color-bg-elevated);
  display:flex; align-items:center; min-height: var(--nav-height-base);
  transition: background .32s cubic-bezier(.4,0,.2,1), box-shadow .32s cubic-bezier(.4,0,.2,1), min-height .36s cubic-bezier(.4,0,.2,1);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}
.site-navbar:not(.shrink) { box-shadow: var(--color-navbar-shadow); }
.site-navbar.shrink { min-height: var(--nav-height-shrink); box-shadow: var(--color-navbar-shadow-strong); }
.site-navbar .brand-image { transition: width .44s cubic-bezier(.4,0,.2,1); width:40px; }
.site-navbar.shrink .brand-image { width:32px !important; }
.site-navbar .brand-text { transition: opacity .44s cubic-bezier(.4,0,.2,1), width .44s cubic-bezier(.4,0,.2,1); display:inline-block; }
.site-navbar.shrink .brand-text { opacity:0; width:0; margin:0; overflow:hidden; }
.site-navbar .nav-btn .btn-text { transition: opacity .2s ease, width .2s ease; white-space:nowrap; }
.site-navbar.shrink .nav-btn .btn-text { opacity:0; width:0; margin:0; overflow:hidden; }
.site-navbar .nav-btn i { transition: margin-right .2s ease; }
.site-navbar.shrink .nav-btn i { margin-right:0 !important; }

/* Navbar compact search */
.navbar-search-wrapper { max-width: 420px; }
.navbar-search { position:relative; width:100%; display:flex; align-items:center; background:#fff; border:1px solid #d5d7da; border-radius: 40px; padding: .25rem .75rem .25rem 2.1rem; transition: box-shadow .2s ease, background .2s ease; font-size:.9rem; }
.navbar-search .search-icon { position:absolute; left:.85rem; color:#888; font-size:.9rem; }
.navbar-search .search-input { flex:1; border:none; outline:none; background:transparent; padding:.2rem 0; min-width:0; }
.navbar-search .search-input::placeholder { color:#aaa; }
.navbar-search:focus-within { box-shadow:0 0 0 3px rgba(220,53,69,.25); border-color:#dc3545; }
.navbar-search .btn-clear { background:none; border:none; color:#888; font-size:1.1rem; line-height:1; padding:0 .25rem; cursor:pointer; }
.navbar-search .btn-clear:hover { color:#dc3545; }
.site-navbar.shrink .navbar-search { padding-left:2rem; }
@media (max-width: 991.98px) {
  .navbar-search-wrapper { display:none !important; }
}

/* Active nav button */
.site-navbar .nav-btn.active, .site-navbar .nav-btn[aria-current="page"] {
  background:#dc3545; /* danger */
  color:#fff;
  border-color:#dc3545;
}
.site-navbar .nav-btn.active:hover { filter:brightness(1.05); }

/* Nueva paleta jerárquica para botones de navbar */
.site-navbar .nav-btn-primary { background:#dc3545; border:1px solid #dc3545; color:#fff; }
.site-navbar .nav-btn-primary:hover, .site-navbar .nav-btn-primary:focus { background:#c82333; border-color:#c82333; color:#fff; }
.site-navbar .nav-btn-primary.active { background:#bb1d2c; border-color:#bb1d2c; }

.site-navbar .nav-btn-secondary { background:rgba(220,53,69,0.08); border:1px solid rgba(220,53,69,0.35); color:#b11424; }
.site-navbar .nav-btn-secondary:hover, .site-navbar .nav-btn-secondary:focus { background:rgba(220,53,69,0.15); border-color:#dc3545; color:#a31221; }
.site-navbar .nav-btn-secondary.active { background:#dc3545; color:#fff; border-color:#dc3545; }

/* Estado shrink direccional: solo se contrae cuando se hace scroll hacia abajo, se expande hacia arriba */
.site-navbar.direction-shrink { min-height: var(--nav-height-shrink); box-shadow:0 2px 6px rgba(0,0,0,0.12); }
.site-navbar.direction-shrink .brand-image { width:32px !important; }
.site-navbar.direction-shrink .brand-text { opacity:0; width:0; margin:0; overflow:hidden; }
.site-navbar.direction-shrink .nav-btn .btn-text { opacity:0; width:0; margin:0; overflow:hidden; }
.site-navbar.direction-shrink .nav-btn i { margin-right:0 !important; }

/* Transiciones suavizadas para enlaces minimalistas en shrink */
.site-navbar.direction-shrink .nav-item-link { transition: padding .5s cubic-bezier(.4,0,.2,1), background .25s ease; }
.site-navbar .nav-item-link .link-text { transition: opacity .5s cubic-bezier(.4,0,.2,1), width .5s cubic-bezier(.4,0,.2,1); }
.site-navbar.direction-shrink .nav-item-link .link-text { transition: opacity .42s cubic-bezier(.4,0,.2,1), width .42s cubic-bezier(.4,0,.2,1); }

/* Minimal link style navbar (alternativa limpia) */
.site-navbar .nav-item-link { position:relative; display:inline-flex; align-items:center; gap:.45rem; padding:.55rem .9rem; font-size:.9rem; font-weight:500; border-radius:8px; color:var(--color-text); text-decoration:none; line-height:1.2; border:1px solid transparent; background:transparent; cursor:pointer; transition:color .18s ease, background .18s ease, border-color .18s ease; }
.site-navbar .nav-item-link i { font-size:.95rem; }
.site-navbar .nav-item-link:hover, .site-navbar .nav-item-link:focus { background:var(--color-accent-soft); color:var(--color-accent-hover); outline:none; }
.site-navbar .nav-item-link.active, .site-navbar .nav-item-link[aria-current="page"] { background:var(--color-accent); color:#fff; }
.site-navbar .nav-item-link.active i { color:#fff; }
.site-navbar.direction-shrink .nav-item-link { padding:.45rem .75rem; }
.site-navbar.direction-shrink .nav-item-link .link-text { opacity:0; width:0; overflow:hidden; white-space:nowrap; transition:opacity .25s ease, width .25s ease; }
.site-navbar .nav-item-link .link-text { transition:opacity .25s ease, width .25s ease; }

/* Avatar inicial usuario */
.site-navbar .user-avatar { width:28px; height:28px; border-radius:50%; background:linear-gradient(145deg,#dc3545,#a31221); color:#fff; display:inline-flex; align-items:center; justify-content:center; font-size:.75rem; font-weight:700; letter-spacing:.5px; box-shadow:0 0 0 2px #fff; }
.site-navbar.direction-shrink .user-avatar { width:24px; height:24px; font-size:.65rem; letter-spacing:.3px; }

/* Ajustar badge sobre enlaces minimalistas */
.site-navbar .nav-item-link #cart-count { transform:translate(-35%, -35%); box-shadow:0 0 0 2px #fff; }

/* Overlay de búsqueda global */
.search-overlay[hidden] { display:none !important; }
.search-overlay { position:fixed; inset:0; z-index:1400; display:flex; align-items:flex-start; justify-content:center; padding:12vh 1.25rem 2rem; }
.search-overlay-backdrop { position:absolute; inset:0; background:var(--color-backdrop); backdrop-filter:blur(4px); -webkit-backdrop-filter:blur(4px); }
.search-overlay-panel { position:relative; z-index:1; width:100%; max-width:780px; background:var(--color-surface); border-radius:20px; padding:2rem 2rem 2.25rem; box-shadow:0 14px 40px -8px rgba(0,0,0,0.3), 0 4px 12px rgba(0,0,0,0.12); animation:overlayIn .32s cubic-bezier(.4,0,.2,1); }
@keyframes overlayIn { from { opacity:0; transform:translateY(12px) scale(.98); } to { opacity:1; transform:translateY(0) scale(1); } }
.search-overlay-form { position:relative; display:flex; align-items:center; background:var(--color-surface); border:2px solid var(--color-accent); border-radius:50px; padding:.85rem 3.8rem .85rem 2.75rem; font-size:1.05rem; box-shadow:0 0 0 4px var(--color-accent-soft); }
.search-overlay-form:focus-within { box-shadow:0 0 0 6px var(--color-accent-soft-hover); }
.search-overlay-form .search-icon { position:absolute; left:1.15rem; color:var(--color-accent-hover); font-size:1.05rem; }
.search-overlay-form input[type="search"] { flex:1; background:transparent; border:none; outline:none; font-weight:500; letter-spacing:.25px; }
.search-overlay-form input::placeholder { color:#b9858b; }
.search-overlay-form .btn-clear { position:absolute; right:3.1rem; background:none; border:none; font-size:1.35rem; line-height:1; color:var(--color-text-muted); cursor:pointer; padding:0; opacity:.65; }
.search-overlay-form .btn-clear:hover { opacity:1; color:var(--color-accent); }
.search-overlay-form .btn-close-overlay { position:absolute; right:1.15rem; background:none; border:none; color:var(--color-accent-hover); font-size:1.35rem; line-height:1; cursor:pointer; padding:0; opacity:.7; }
.search-overlay-form .btn-close-overlay:hover { opacity:1; color:var(--color-accent); }
.search-overlay .search-hints kbd { background:var(--color-accent-soft); padding:2px 6px; border-radius:5px; font-size:.75rem; font-weight:600; border:1px solid var(--color-border); color:var(--color-text); }

/* Dropdown a11y focus */
.dropdown-menu [role="menuitem"]:focus { outline:none; background:var(--color-accent-soft); color:var(--color-accent-hover); }

/* Cart mini preview */
.cart-preview { position:absolute; top:100%; right:0; margin-top:.4rem; width:310px; background:var(--color-surface); border:1px solid var(--color-border); border-radius:14px; padding:0.9rem 0.95rem 1rem; box-shadow:0 6px 28px -4px rgba(0,0,0,0.18),0 2px 8px rgba(0,0,0,0.08); opacity:0; transform:translateY(6px) scale(.98); pointer-events:none; transition:opacity .25s ease, transform .28s cubic-bezier(.4,0,.2,1); }
.cart-preview.show { opacity:1; transform:translateY(0) scale(1); pointer-events:auto; }
.cart-preview { --arrow-offset: 38px; }
.cart-preview:before { content:""; position:absolute; top:-8px; right:var(--arrow-offset); width:14px; height:14px; background:var(--color-surface); border:1px solid var(--color-border); border-bottom:none; border-right:none; transform:rotate(45deg); box-shadow:-2px -2px 4px rgba(0,0,0,0.04); }
.cart-preview-header { font-size:.85rem; }
.cart-preview-item .fw-medium { font-weight:600; }
[data-theme="dark"] .cart-preview:before { background:var(--color-surface); border-color:var(--color-border); }
.cart-preview-thumb { width:40px; height:40px; object-fit:cover; background:#f3f4f5; }
[data-theme="dark"] .cart-mini-qty-form button { border-color: var(--color-border); }
.cart-mini-qty-form button { line-height:1; font-size:.75rem; }
.cart-mini-qty-form button:disabled { opacity:.4; cursor:not-allowed; }
[data-theme="dark"] .cart-preview-thumb.placeholder { background:#2e3439; }
.cart-preview-thumb.placeholder { font-size:.9rem; color:#999; }
[data-theme="dark"] .cart-preview { box-shadow:0 6px 32px -8px rgba(0,0,0,0.55),0 2px 10px rgba(0,0,0,0.5); }
@media (max-width: 575.98px){
  .search-overlay { padding:10vh .75rem 1.5rem; }
  .search-overlay-panel { padding:1.4rem 1.25rem 2rem; border-radius:16px; }
  .search-overlay-form { padding:.8rem 3.2rem .8rem 2.3rem; font-size:1rem; }
  .search-overlay-form .search-icon { left:.9rem; }
  .search-overlay-form .btn-clear { right:2.7rem; }
  .search-overlay-form .btn-close-overlay { right:.9rem; }
}

body.overlay-open { overflow:hidden; }

/* Cart badge refinements */
#cart-count { min-width:1.15rem; height:1.15rem; padding:0 0.25rem; font-size:.65rem; line-height:1.15rem; }

/* Improve collapse spacing on mobile */
@media (max-width: 991.98px) { /* Bootstrap lg breakpoint */
  .site-navbar .navbar-collapse { padding-top:.5rem; padding-bottom:.75rem; }
  .site-navbar .nav-btn { width:100%; justify-content:flex-start; }
}


/* Kaminari pagination custom styles */
.pagination {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-top: 1.5rem;
  margin-bottom: 1.5rem;
}

.pagination .page,
.pagination .next,
.pagination .prev {
  display: inline-block;
  min-width: 36px;
  height: 36px;
  line-height: 36px;
  text-align: center;
  border-radius: 6px;
  background: #f8f9fa;
  color: #007bff;
  font-weight: 500;
  font-size: 1rem;
  margin: 0 2px;
  transition: background 0.2s, color 0.2s;
}

.pagination .current {
  background: #007bff;
  color: #fff;
  font-weight: bold;
  border-radius: 6px;
}

.pagination .disabled {
  color: #ccc;
  background: #f8f9fa;
}
