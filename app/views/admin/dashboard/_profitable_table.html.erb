<% rel ||= @rel %>
<% rows ||= @rows %>
<% period ||= @period %>
<div class="table-responsive">
  <table class="table table-sm align-middle">
    <thead class="table-light sticky-top">
      <tr>
        <th scope="col">Producto</th>
        <th scope="col">Marca</th>
        <th scope="col">Categoría</th>
        <th scope="col" class="text-end">Ingresos</th>
        <th scope="col" class="text-end">COGS</th>
        <th scope="col" class="text-end">Utilidad</th>
      </tr>
    </thead>
    <tbody>
      <% if rows.present? %>
        <% rows.each do |r| %>
          <tr>
            <td><%= r[:name] %></td>
            <td><%= r[:brand] %></td>
            <td><%= r[:category] %></td>
            <td class="text-end"><%= number_to_currency(r[:revenue]) %></td>
            <td class="text-end"><%= number_to_currency(r[:cogs]) %></td>
            <td class="text-end <%= 'text-danger' if r[:profit].to_d < 0 %>"><%= number_to_currency(r[:profit]) %></td>
          </tr>
        <% end %>
      <% else %>
        <tr>
          <td colspan="6">
            <div class="placeholder-glow py-3">
              <span class="placeholder col-12"></span>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<div class="px-3 py-2 d-flex justify-content-between align-items-center">
  <div class="small text-muted">
    <%= page_entries_info rel if defined?(page_entries_info) && rel.respond_to?(:current_page) %>
  </div>
  <nav aria-label="Paginación rentables">
    <ul class="pagination pagination-sm mb-0">
      <% prev_params = request.query_parameters.merge(page: rel.prev_page, period: period, per: rel.limit_value) %>
      <% next_params = request.query_parameters.merge(page: rel.next_page, period: period, per: rel.limit_value) %>
      <li class="page-item <%= 'disabled' unless rel.prev_page %>">
        <%= link_to 'Anterior', admin_dashboard_profitable_path(prev_params), data: { turbo_frame: "frame-profit-#{period}" }, class: 'page-link' %>
      </li>
      <li class="page-item <%= 'disabled' unless rel.next_page %>">
        <%= link_to 'Siguiente', admin_dashboard_profitable_path(next_params), data: { turbo_frame: "frame-profit-#{period}" }, class: 'page-link' %>
      </li>
    </ul>
  </nav>
</div>
