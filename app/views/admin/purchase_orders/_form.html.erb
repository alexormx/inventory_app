<%= form_with model: [:admin, purchase_order], local: true, class: "row g-3" do |f| %>
  <!-- Supplier -->
  <div class="col-md-3">
    <%= f.label :user_id, "Supplier" %>
  <div data-controller="user-suggest" class="position-relative">
      <input type="text" class="form-control" data-user-suggest-target="input" placeholder="Empieza a escribir el proveedor" data-action="input->user-suggest#input keydown->user-suggest#keydown">
      <%= f.hidden_field :user_id, data: { 'user-suggest-target': 'hidden' } %>
      <div class="form-text" data-user-suggest-target="hint"></div>
      <div data-user-suggest-target="results" style="z-index: 1050;"></div>
    </div>
  </div>

  <!-- Dates -->
  <div class="col-md-3">
    <%= f.label :order_date %>
    <%= f.date_field :order_date, class: "form-control" %>
  </div>

  <div class="col-md-3">
    <%= f.label :expected_delivery_date %>
    <%= f.date_field :expected_delivery_date, class: "form-control" %>
  </div>

  <div class="col-md-3">
    <%= f.label :actual_delivery_date %>
    <%= f.date_field :actual_delivery_date, class: "form-control" %>
  </div>

  <!-- Financials -->
  <div class="col-md-3">
    <%= f.label :subtotal %>
    <div class="form-control-plaintext fw-semibold"><%= number_with_precision(purchase_order.subtotal, precision: 2) %></div>
  </div>

  <div class="col-md-3">
    <%= f.label :shipping_cost %>
    <%= f.number_field :shipping_cost, step: 0.01, class: "form-control" %>
  </div>

  <div class="col-md-3">
    <%= f.label :tax_cost %>
    <%= f.number_field :tax_cost, step: 0.01, class: "form-control" %>
  </div>

  <div class="col-md-3">
    <%= f.label :other_cost %>
    <%= f.number_field :other_cost, step: 0.01, class: "form-control" %>
  </div>

  <!-- Status -->
  <div class="col-md-3">
    <%= f.label :status %>
    <%= f.select :status, ["Pending", "In Transit", "Delivered", "Canceled"], {}, class: "form-select" %>
  </div>

  <div class="col-md-3">
    <%= f.label :currency %>
  <%= f.select :currency, PurchaseOrder::CURRENCIES, {}, class: "form-select" %>
  </div>

  <div class="col-md-3">
    <%= f.label :exchange_rate, "Exchange Rate vs MXN" %>
    <%= f.number_field :exchange_rate, step: 0.0001, class: "form-control", placeholder: "e.g., 17.5000 (1 USD/EUR -> MXN)" %>
  </div>

  <div class="col-md-3">
    <%= f.label :total_order_cost, "Total Order Cost" %>
    <div class="form-control-plaintext fw-semibold" id="total_order_cost"><%= number_with_precision(purchase_order.total_order_cost, precision: 2) %></div>
  </div>

  <div class="col-md-3">
    <%= f.label :total_cost_mxn, "Total in MXN" %>
    <div class="form-control-plaintext fw-semibold" id="total_cost_mxn"><%= number_with_precision(purchase_order.total_cost_mxn, precision: 2) %></div>
  </div>

  <!-- Add total volume and weight based on new columns created in last migration-->
  <div class="col-md-3">
    <%= f.label :total_volume, "Total Volume (cmÂ³)" %>
    <div class="form-control-plaintext" id="total_volume"><%= number_with_precision(purchase_order.total_volume, precision: 2) %></div>
  </div>

  <div class="col-md-3">
    <%= f.label :total_weight, "Total Weight (gr)" %>
    <div class="form-control-plaintext" id="total_weight"><%= number_with_precision(purchase_order.total_weight, precision: 2) %></div>
  </div>

  <!-- Notes -->
  <div class="col-md-6">
    <%= f.label :notes %>
    <%= f.text_area :notes, class: "form-control", rows: 3 %>
  </div>

  <!-- Buttons -->
  <div class="col-12">
    <%= f.submit "Save Purchase Order", class: "btn btn-success" %>
    <%= link_to "Cancel", admin_purchase_orders_path, class: "btn btn-secondary" %>
  </div>
<% end %>
