<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <title><%= content_for?(:title) ? yield(:title) : "Pasatiempos a Escala" %></title>

  <meta name="description" content="<%= content_for?(:meta_description) ? yield(:meta_description) : 'Pasatiempos a Escala. Muy pronto podrÃ¡s ver productos disponibles para comprar en lÃ­nea.' %>">
  <meta name="author" content="Pasatiempos">
  <meta name="robots" content="index, follow">
  <meta name="language" content="es">
  
  <!-- Favicon -->
  <%= favicon_link_tag 'favicon.ico' %>
  <%= favicon_link_tag 'favicon.svg', type: 'image/svg+xml' %>
  <link rel="apple-touch-icon" href="/favicon.ico">

  <!-- Open Graph / Facebook -->
  <meta property="og:title" content="<%= content_for?(:title) ? yield(:title) : 'Pasatiempos' %>">
  <meta property="og:description" content="<%= content_for?(:meta_description) ? yield(:meta_description) : 'Muy pronto podrÃ¡s ver productos disponibles en Pasatiempos.' %>">
  <meta property="og:image" content="https://pasatiempos.com.mx/logo.png">
  <meta property="og:url" content="https://pasatiempos.com.mx">
  <meta property="og:type" content="website">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="<%= content_for?(:title) ? yield(:title) : 'Pasatiempos' %>">
  <meta name="twitter:description" content="<%= content_for?(:meta_description) ? yield(:meta_description) : 'Muy pronto podrÃ¡s ver productos disponibles en Pasatiempos.' %>">
  <meta name="twitter:image" content="https://pasatiempos.com.mx/logo.png">


  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <!-- âœ… FontAwesome via CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <%= stylesheet_link_tag "application", media: "all", "data-turbo-track": "reload" %>
  <%= javascript_importmap_tags %>
</head>


<!-- Incluir el partial del banner -->
<%= render 'layouts/cookies_banner'%>

<body>
  <div id="construction-banner" class="alert alert-warning text-center mb-0 rounded-0 construction-banner" role="alert" style="padding: 0.3rem 1rem; font-size: 0.9rem; position:fixed; top:0; left:0; right:0; z-index:1200;">
    ðŸš§ Bienvenido a <strong>Pasatiempos a Escala</strong> â€“ Sitio en construcciÃ³n. Muy pronto podrÃ¡s ver nuestros autos coleccionables.
  </div>

  <!-- âœ… NAVBAR -->
  <header>
    <%= render 'customers/partials/navbar' %>
  </header>

  <!-- âœ… Main Content -->
  <main class="container mt-4">
    <%= render 'layouts/flash' %>
    <%= yield %>
  </main>
  
  <!-- âœ… Floating WhatsApp Button -->
  <%= render 'layouts/floating_whatsapp' %>

  <!-- âœ… Footer -->
  <%= render 'customers/partials/footer' %>

  <script>
    (function(){
      function recalcLayout(){
        const banner = document.getElementById('construction-banner');
        const nav = document.querySelector('.site-navbar');
        if(!banner || !nav) return;
        const bannerH = banner.offsetHeight;
        document.documentElement.style.setProperty('--banner-height', bannerH + 'px');
        // Wait a tick after potential shrink transition
        setTimeout(()=>{
          const navH = nav.offsetHeight;
          document.documentElement.style.setProperty('--nav-height', navH + 'px');
          document.body.style.paddingTop = (bannerH + navH) + 'px';
        }, 20);
      }
      ['turbo:load','turbo:render'].forEach(ev=>document.addEventListener(ev,recalcLayout));
      window.addEventListener('resize', recalcLayout);
      recalcLayout();
    })();
  </script>

</body>
</html>
