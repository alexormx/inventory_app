<% content_for :title, t('home.index.meta.title') %>
<% content_for :description, t('home.index.meta.description') %>

<!-- ‚ú® HERO SECTION -->
<section class="hero-section position-relative d-flex align-items-center text-white" style="min-height: 60vh; background: linear-gradient(135deg, rgba(220,53,69,0.5) 0%, rgba(185,28,28,0.5) 50%, rgba(127,29,29,0.55) 100%), url('<%= asset_path('collection_shelf.jpg') %>') center/cover no-repeat; overflow: hidden;">
  <div class="hero-overlay position-absolute w-100 h-100" style="background: rgba(0,0,0,0.1); top: 0; left: 0;"></div>
  <div class="container position-relative text-center" style="z-index: 2;">
    <h1 class="display-3 fw-bold mb-4 animate__animated animate__fadeInDown" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.5), 0 0 30px rgba(255,255,255,0.6), 0 0 60px rgba(255,255,255,0.3);"><%= raw t('home.index.heading_html') %></h1>
    <p class="lead mb-5 fs-4 animate__animated animate__fadeInUp" style="max-width: 700px; margin: 0 auto; text-shadow: 1px 1px 4px rgba(0,0,0,0.5), 0 0 25px rgba(255,255,255,0.5);"><%= t('home.index.lead') %></p>
    <div class="d-flex flex-column flex-sm-row justify-content-center gap-3 animate__animated animate__fadeInUp animate__delay-1s">
      <% if user_signed_in? %>
        <%= link_to catalog_path, class: "btn btn-light btn-lg px-5 py-3 shadow-sm" do %>
          <i class="fas fa-store me-2"></i><%= t('home.index.explore_cta') %>
        <% end %>
      <% else %>
        <%= link_to new_user_registration_path, class: "btn btn-light btn-lg px-5 py-3 shadow-sm" do %>
          <i class="fas fa-user-plus me-2"></i><%= t('home.index.register_cta') %>
        <% end %>
        <%= link_to new_user_session_path, class: "btn btn-outline-light btn-lg px-5 py-3" do %>
          <i class="fas fa-sign-in-alt me-2"></i><%= t('home.index.login_cta') %>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<!-- üìä ESTAD√çSTICAS -->
<section class="stats-section py-4 bg-dark text-white">
  <div class="container">
    <div class="row text-center justify-content-center">
      <div class="col-4 col-md-3">
        <div class="stat-item">
          <i class="fas fa-box-open text-danger mb-2" style="font-size: 1.5rem;"></i>
          <div class="fs-2 fw-bold text-danger"><%= number_with_delimiter(@stats[:products]) %>+</div>
          <div class="small text-white-50 text-uppercase" style="letter-spacing: 1px;">Productos</div>
        </div>
      </div>
      <div class="col-4 col-md-3">
        <div class="stat-item">
          <i class="fas fa-users text-danger mb-2" style="font-size: 1.5rem;"></i>
          <div class="fs-2 fw-bold text-danger"><%= number_with_delimiter(@stats[:customers]) %>+</div>
          <div class="small text-white-50 text-uppercase" style="letter-spacing: 1px;">Clientes Felices</div>
        </div>
      </div>
      <div class="col-4 col-md-3">
        <div class="stat-item">
          <i class="fas fa-award text-danger mb-2" style="font-size: 1.5rem;"></i>
          <div class="fs-2 fw-bold text-danger"><%= @stats[:years] %>+</div>
          <div class="small text-white-50 text-uppercase" style="letter-spacing: 1px;">A√±os de Experiencia</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- üè∑Ô∏è CATEGOR√çAS DESTACADAS -->
<section class="categories-section py-5 bg-light">
  <div class="container">
    <div class="text-center mb-4">
      <h2 class="display-6 fw-bold mb-2">Explora por Categor√≠a</h2>
      <p class="text-muted">Encuentra exactamente lo que buscas</p>
    </div>
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-6 g-3">
      <%
        categories = [
          { name: 'Autos a Escala', icon: 'fa-car', color: 'danger', query: 'diecast' },
          { name: 'Figuras', icon: 'fa-chess-knight', color: 'primary', query: 'figuras' },
          { name: 'Coleccionables', icon: 'fa-gem', color: 'warning', query: 'coleccionables' },
          { name: 'Juguetes', icon: 'fa-puzzle-piece', color: 'success', query: 'juguetes' },
          { name: 'Cartas', icon: 'fa-clone', color: 'info', query: 'cartas' },
          { name: 'Otros', icon: 'fa-ellipsis-h', color: 'secondary', query: '' }
        ]
      %>
      <% categories.each do |cat| %>
        <div class="col">
          <%= link_to catalog_path(q: cat[:query]), class: "text-decoration-none" do %>
            <div class="card border-0 shadow-sm h-100 text-center hover-lift">
              <div class="card-body py-4">
                <div class="mb-2">
                  <i class="fas <%= cat[:icon] %> fa-2x text-<%= cat[:color] %>"></i>
                </div>
                <h6 class="card-title mb-0 fw-semibold text-dark small"><%= cat[:name] %></h6>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</section>

<!-- üåü PRODUCTOS DESTACADOS -->
<% featured_products = @products.select { |p| p.current_on_hand > 0 }.first(8) %>
<% if featured_products.present? %>
<section class="featured-products py-5">
  <div class="container">
    <div class="text-center mb-5">
      <h2 class="display-5 fw-bold mb-3">Productos Destacados</h2>
      <p class="lead text-muted">Descubre las √∫ltimas novedades de nuestra colecci√≥n</p>
    </div>
    <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4 mb-4">
      <% featured_products.each do |product| %>
        <div class="col">
          <div class="card h-100 border-0 shadow-sm hover-lift">
            <%= link_to product_path(product), class: "text-decoration-none" do %>
              <% if product.product_images&.attached? %>
                <%= image_tag product.product_images.first, class: "card-img-top", alt: product.product_name, style: "height: 200px; object-fit: cover;", loading: "lazy" %>
              <% else %>
                <div class="card-img-top bg-secondary d-flex align-items-center justify-content-center text-white" style="height: 200px;">
                  <i class="fas fa-image fa-3x opacity-50"></i>
                </div>
              <% end %>
              <div class="card-body">
                <h6 class="card-title text-dark mb-2 fw-semibold" style="font-size: 0.9rem;"><%= product.product_name %></h6>
                <p class="text-danger fw-bold mb-0"><%= number_to_currency(product.selling_price) %></p>
              </div>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
    <div class="text-center">
      <%= link_to catalog_path, class: "btn btn-danger btn-lg px-5" do %>
        Ver Cat√°logo Completo <i class="fas fa-arrow-right ms-2"></i>
      <% end %>
    </div>
  </div>
</section>
<% end %>

<!-- ‚úÖ TRUST BADGES -->
<section class="trust-section py-5 bg-light">
  <div class="container">
    <div class="row row-cols-2 row-cols-md-4 g-4 text-center">
      <div class="col">
        <div class="trust-badge">
          <i class="fas fa-truck fa-2x text-danger mb-3"></i>
          <h6 class="fw-bold mb-1">Env√≠o Seguro</h6>
          <p class="small text-muted mb-0">Empaque profesional</p>
        </div>
      </div>
      <div class="col">
        <div class="trust-badge">
          <i class="fas fa-shield-alt fa-2x text-danger mb-3"></i>
          <h6 class="fw-bold mb-1">Pago Protegido</h6>
          <p class="small text-muted mb-0">Transacciones seguras</p>
        </div>
      </div>
      <div class="col">
        <div class="trust-badge">
          <i class="fas fa-certificate fa-2x text-danger mb-3"></i>
          <h6 class="fw-bold mb-1">100% Original</h6>
          <p class="small text-muted mb-0">Garant√≠a de autenticidad</p>
        </div>
      </div>
      <div class="col">
        <div class="trust-badge">
          <i class="fas fa-headset fa-2x text-danger mb-3"></i>
          <h6 class="fw-bold mb-1">Soporte</h6>
          <p class="small text-muted mb-0">Atenci√≥n personalizada</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- üíé VALUE PROPOSITIONS -->
<div class="container py-5">
  <div class="text-center mb-5">
    <h2 class="display-5 fw-bold mb-3">¬øPor qu√© Pasatiempos?</h2>
    <p class="lead text-muted">Tu aliado en el mundo del coleccionismo</p>
  </div>

  <div class="row row-cols-1 row-cols-md-2 g-4 mb-5">
    <div class="col">
      <div class="card border-0 shadow-sm h-100 hover-lift">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-box-open text-danger fa-3x"></i>
          </div>
          <h5 class="card-title fw-bold mb-3"><%= t('home.index.cards.collection.title') %></h5>
          <p class="card-text text-muted"><%= t('home.index.cards.collection.text') %></p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card border-0 shadow-sm h-100 hover-lift">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-users text-danger fa-3x"></i>
          </div>
          <h5 class="card-title fw-bold mb-3"><%= t('home.index.cards.community.title') %></h5>
          <p class="card-text text-muted"><%= t('home.index.cards.community.text') %></p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card border-0 shadow-sm h-100 hover-lift">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-heart text-danger fa-3x"></i>
          </div>
          <h5 class="card-title fw-bold mb-3"><%= t('home.index.cards.legacy.title') %></h5>
          <p class="card-text text-muted"><%= t('home.index.cards.legacy.text') %></p>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card border-0 shadow-sm h-100 hover-lift">
        <div class="card-body text-center p-4">
          <div class="mb-3">
            <i class="fas fa-shield-alt text-danger fa-3x"></i>
          </div>
          <h5 class="card-title fw-bold mb-3"><%= t('home.index.cards.practices.title') %></h5>
          <p class="card-text text-muted"><%= t('home.index.cards.practices.text') %></p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- üìß NEWSLETTER -->
<section class="newsletter-section py-5 bg-danger text-white">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <h2 class="display-6 fw-bold mb-3">¬°Mantente Actualizado!</h2>
        <p class="lead mb-4">Recibe las √∫ltimas novedades, ofertas exclusivas y lanzamientos directamente en tu correo.</p>
        <%= form_with model: NewsletterSubscriber.new, url: newsletter_subscribers_path, class: "row g-3 justify-content-center" do |f| %>
          <div class="col-12 col-md-7">
            <%= f.email_field :email, class: "form-control form-control-lg", placeholder: "Tu correo electr√≥nico", required: true %>
          </div>
          <div class="col-12 col-md-auto">
            <%= f.submit "Suscribirse", class: "btn btn-light btn-lg px-5 w-100" %>
          </div>
        <% end %>
        <p class="small mt-3 opacity-75">
          <i class="fas fa-lock me-1"></i>Tu privacidad es importante. No compartimos tu informaci√≥n.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- üöÄ CALL TO ACTION -->
<% unless user_signed_in? %>
<div class="container my-5 py-5 text-center">
  <h2 class="fw-bold text-danger mb-3"><%= t('home.index.join_title') %></h2>
  <p class="lead mb-4"><%= t('home.index.join_lead') %></p>
  <div class="d-flex flex-column flex-sm-row justify-content-center gap-3">
    <%= link_to new_user_session_path, class: "btn btn-outline-danger btn-lg px-5 py-3" do %>
      <i class="fas fa-sign-in-alt me-2"></i><%= t('home.index.login_cta') %>
    <% end %>
    <%= link_to new_user_registration_path, class: "btn btn-danger btn-lg px-5 py-3" do %>
      <i class="fas fa-user-plus me-2"></i><%= t('home.index.register_cta') %>
    <% end %>
  </div>
</div>
<% end %>
