<!-- Flash success message -->
<%= turbo_stream.replace 'flash' do %>
  <div id="flash" class="flash-container position-fixed" style="z-index:1300; width:min(360px,90vw); bottom:1rem; right:1rem; display:flex; flex-direction:column; align-items:flex-end;">
    <% flash.each do |key, message| %>
      <div class="alert <%= bootstrap_class_for(key) %> alert-dismissible fade show flash-message shadow" role="alert" style="border-radius:.65rem; backdrop-filter: blur(6px);">
        <%= message %>
        <button type="button" class="btn-close" aria-label="Close"></button>
      </div>
    <% end %>
  </div>
<% end %>

<!-- Update the cart counting with turbo -->
<%= turbo_stream.replace "cart-count" do %>
  <span id="cart-count" class="badge bg-danger rounded-pill position-absolute top-0 start-100 translate-middle">
    <%= session[:cart]&.values&.sum || 0 %>
  </span>
<% end %>